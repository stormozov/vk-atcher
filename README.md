
# VK Atcher

VK Atcher — это бот для социальной сети ВКонтакте, предназначенный для поиска людей по заданным параметрам, с возможностью взаимодействия с их профилями. Бот работает с **VK API** и предоставляет пользователям удобный интерфейс для поиска и сохранения контактов.

## Функционал бота

Данный бот представляет собой бота для поиска знакомств в социальной сети **ВКонтакте**. Основные возможности бота включают:

- Поиск людей по полу, возрасту и городу, используя данные, полученные со страницы ВК пользователя бота.
- Получение и отображение трех самых популярных фотографий пользователя на основе лайков.
- Возможность ставить лайки пользователям на фотографии прямо из чата.
- Добавление профилей в избранное для дальнейшего.Просмотр списка избранных пользователей и управление этим списком.
- Управление черным списком: добавление пользователей в черный список, чтобы исключить их из дальнейших предложений.


## Как это работает

1. **Поиск пользователей**:
    - Бот использует **VK API** для поиска пользователей по заданным параметрам: пол, возраст и город.
    - Используя данные пользователя бота он выполняет запросы к VK API, чтобы получить список подходящих людей.

2. **Отображение информации**:
    - Бот запрашивает у VK API с помощью нескольких методовов информацию о найденных пользователей и сортирует ее по нескольким параметрам.
    - Выводит три самые популярные фотографии каждого пользователя в чат, позволяя пользователю ознакомиться с их профилем.

3. **Лайки и избранное**:
    - Пользователь может лайкать фотографии через интерфейс бота, что автоматически передается в VK API и отображается на странице пользователя.
    - Бот сохраняет понравившихся пользователей в базу данных с помощью **SQLAlchemy**, что позволяет просматривать их позже в списке избранных.

4. **Черный список**:
    - Если пользователь не хочет больше видеть определенные профили, он может добавить их в черный список.
    - Бот ведет собственный черный список, который не связан с функциональностью блокировки ВКонтакте. Пользователи, находящиеся в черном списке, не будут появляться в будущих результатах поиска.

## Установка и настройка

1. Клонируйте репозиторий:
   ```bash
   git clone <https://github.com/stormozov/vk-atcher>
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Настройте файл `.env`, добавив в него следующие переменные окружения:
   - `VK_TOKEN` — личный токен для доступа к API ВКонтакте (например, для поиска пользователей).
   - `VK_GROUP_TOKEN` — токен группы ВКонтакте, необходимый для управления ботом через группу.
   - `DSN` — строка подключения к базе данных PostgreSQL, включающая логин, пароль, адрес хоста и порт.

4. Перед запуском бота необходимо создать базу данных. Для этого выполните скрипт refreshing.py, который отвечает за создание необходимых таблиц в базе данных. Учтите, что данный скрипт сначала удаляет существующие таблицы, а затем создает новые.

	**Важно:** удаление и пересоздание таблиц сделано для упрощения дебага и тестирования. Для боевой версии проекта этот механизм можно убрать или адаптировать под ваши нужды.

   Для создания базы данных выполните команду:

```bash
python refreshing.py
```

## Запуск

Для запуска бота выполните команду:

```bash
python main.py
```

Бот будет готов к работе и начнет взаимодействовать с пользователями через диалоги ВКонтакте.


